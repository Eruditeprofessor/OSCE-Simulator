<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OSCE Simulator</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'nunsa-green': '#047857',
            'nunsa-green-dark': '#065f46'
          },
          keyframes: {
            'fade-slide-up': {
              '0%': { opacity: '0', transform: 'translateY(8px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            }
          },
          animation: {
            'fade-slide-up': 'fade-slide-up 300ms ease-out'
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 bg-gray-100 dark:bg-gray-900 transition-colors duration-300">

  <!-- Theme Toggle + Date -->
  <div class="fixed top-4 right-4 flex space-x-4 items-center z-20">
    <span id="currentDate" class="text-sm font-medium text-gray-500 dark:text-gray-400"></span>
    <button id="themeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors duration-200" title="Toggle Dark/Light Mode">
      <svg id="themeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun">
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2"></path>
        <path d="M12 20v2"></path>
        <path d="M4.93 4.93l1.41 1.41"></path>
        <path d="M17.66 17.66l1.41 1.41"></path>
        <path d="M2 12h2"></path>
        <path d="M20 12h2"></path>
        <path d="M4.93 19.07l1.41-1.41"></path>
        <path d="M17.66 6.34l1.41-1.41"></path>
      </svg>
    </button>
  </div>

  <div class="w-full max-w-lg mx-auto p-6 md:p-10 rounded-xl card-bg transition-colors duration-300 shadow-lg">

    <h1 class="text-3xl font-extrabold text-center mb-6 border-b pb-3 border-gray-200 dark:border-gray-700 text-nunsa-green">
      OSCE SIMULATOR
    </h1>

    <!-- 1. Login -->
    <div class="screen" id="login-screen">
      <p class="text-center mb-6 text-gray-600 dark:text-gray-400">Please enter your details to begin the simulation</p>
      <input type="text" id="candidateName" placeholder="Enter Full Name" class="w-full px-4 py-3 mb-4 rounded-lg border dark:bg-gray-700 dark:border-gray-600 focus:ring-nunsa-green focus:border-nunsa-green transition duration-150" />
      <input type="text" id="examNumber" placeholder="Enter Examination Number" class="w-full px-4 py-3 mb-6 rounded-lg border dark:bg-gray-700 dark:border-gray-600 focus:ring-nunsa-green focus:border-nunsa-green transition duration-150" />
      <button onclick="goToTopicSelection()" class="w-full py-3 font-semibold rounded-lg bg-nunsa-green text-white hover:bg-nunsa-green-dark transition transform hover:-translate-y-0.5 hover:scale-[1.01] shadow-md">
        Proceed to Topic Selection
      </button>
    </div>

    <!-- 2. Topic Selection -->
    <div class="screen" id="topic-screen" style="display:none;">
      <h2 id="welcomeText" class="text-2xl font-bold mb-6 text-center text-gray-800 dark:text-gray-200"></h2>
      <p class="text-lg mb-6 font-medium text-gray-700 dark:text-gray-300">Select a Nursing Procedure/Topic to Simulate:</p>
      <div id="topicButtons" class="space-y-3"></div>
      <button onclick="goToLogin()" class="w-full py-3 mt-8 font-semibold rounded-lg border border-gray-300 bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition">‚Üê Change Details</button>
    </div>

    <!-- 3. Quiz -->
    <div class="screen" id="quiz-screen" style="display:none;">
      <div class="flex justify-between items-center mb-4 pb-2 border-b dark:border-gray-600">
        <div id="progressIndicator" class="text-sm font-medium text-gray-500 dark:text-gray-400">Question 1 of 10</div>
        <div id="timer" class="px-3 py-1 bg-red-600 text-white text-sm font-bold rounded-full shadow-md">Time Left: 03:00</div>
      </div>

      <h3 id="quizTopic" class="text-xl font-semibold mb-6 text-nunsa-green">Topic: Simulation</h3>

      <h2 id="question" class="text-2xl font-bold mb-8 text-gray-800 dark:text-gray-100 min-h-[60px] flex items-center animate-fade-slide-up">Question goes here</h2>

      <div id="answer-buttons" class="space-y-3"></div>

      <div class="mt-6 flex gap-3">
        <button id="next-btn" class="flex-1 py-3 font-semibold rounded-lg bg-nunsa-green text-white hover:bg-nunsa-green-dark transition transform hover:-translate-y-0.5 hover:scale-[1.01] shadow-lg" style="display:none;">Next Question</button>
        <button id="skip-btn" class="py-3 px-4 font-semibold rounded-lg border border-gray-300 bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition">Skip</button>
      </div>
    </div>

    <!-- 4. Result -->
    <div class="screen" id="result-screen" style="display:none;">
      <h2 class="text-3xl font-extrabold mb-4 text-center text-nunsa-green">Simulation Complete!</h2>
      <p id="resultText" class="text-xl font-medium mb-8 text-center text-gray-700 dark:text-gray-300">üéâ Well done, [Name]!</p>

      <div class="flex flex-col md:flex-row items-center justify-center gap-8 mb-6">
        <div class="text-left space-y-2">
          <p class="text-lg font-semibold text-gray-800 dark:text-gray-200">Total Questions: <span id="totalQs" class="font-extrabold text-nunsa-green">10</span></p>
          <p class="text-lg font-semibold text-gray-800 dark:text-gray-200">Correct Answers: <span id="correctScore" class="font-extrabold text-green-600">0</span></p>
          <p class="text-lg font-semibold text-gray-800 dark:text-gray-200">Incorrect Answers: <span id="incorrectScore" class="font-extrabold text-red-600">0</span></p>
          <p class="text-lg font-semibold text-gray-800 dark:text-gray-200">Percentage: <span id="percentageScore" class="font-extrabold text-blue-600">0%</span></p>
        </div>

        <!-- Improved Pie -->
        <div class="flex flex-col items-center">
          <p class="text-sm font-semibold mb-2 text-gray-500 dark:text-gray-400">Performance</p>
          <div id="pieChart" class="relative w-[160px] h-[160px] rounded-full overflow-hidden shadow-sm transform transition-all duration-700">
            <div id="pieCenter" class="absolute inset-0 flex items-center justify-center pointer-events-none">
              <div id="pieText" class="text-2xl font-extrabold"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex gap-3">
        <button id="retry-btn" class="w-full py-3 font-semibold rounded-lg bg-nunsa-green text-white hover:bg-nunsa-green-dark transition transform hover:-translate-y-0.5 hover:scale-[1.01] shadow-md">Retry Same Topic</button>
      </div>
      <div class="mt-3 flex gap-3">
        <button onclick="goToTopicSelection()" class="w-full py-3 font-semibold rounded-lg border border-gray-300 bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition">Start New Simulation</button>
        <button onclick="showReview()" class="w-full py-3 font-semibold rounded-lg bg-white border border-gray-300 text-gray-800 hover:bg-gray-50 transition">Review Answers</button>
      </div>
    </div>

    <!-- 5. Review Page -->
    <div class="screen" id="review-screen" style="display:none;">
      <h2 class="text-2xl font-bold mb-4 text-center text-gray-800 dark:text-gray-100">Test Review</h2>
      <p class="text-sm text-gray-600 dark:text-gray-300 mb-6">Below are the questions you attempted. For each item you will see your chosen answer, the correct answer and a brief explanation.</p>
      <div id="reviewList" class="space-y-4 max-h-[50vh] overflow-auto pr-2"></div>

      <div class="mt-6 flex gap-3">
        <button onclick="goToTopicSelection()" class="w-full py-3 font-semibold rounded-lg bg-nunsa-green text-white hover:bg-nunsa-green-dark transition">Back to Topics</button>
        <button onclick="goToLogin()" class="w-full py-3 font-semibold rounded-lg border border-gray-300 bg-gray-100 text-gray-800 hover:bg-gray-200">Change Details</button>
      </div>
    </div>

  </div>

  <footer class="mt-6 text-sm text-gray-500 dark:text-gray-400 text-center">
    &copy; <span id="year"></span> TSA@Clinnovate
  </footer>

  <script src="script.js"></script>
</body>
</html>
